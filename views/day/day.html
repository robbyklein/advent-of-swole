{{ define "day" }}
  {{ template "head" . }}
  {{ template "header" . }}

  <main>
    <div class="width width--fixed">
        <h1>Challenge for Day {{ .DayNumber }} in {{ .Year }}-{{ .Month }}</h1>

        {{ if .Challenges }}
          <ul>
            {{ range .Challenges }}
              <li>
                <strong>{{ .Description }}</strong>
                <p>Category: {{ .Category }}</p>
                <p>Difficulty: {{ .Difficulty }}</p>
                <p>Muscle Groups: {{ .MuscleGroups }}</p>

                {{ if $.IsCurrentDay }}
                  {{ if $.IsLoggedIn }}
                    {{ if index $.CompletedMap .ID }}
                      <p>Already Completed</p>
                    {{ else }}
                      <form method="POST" action="/challenge/complete">
                        <input type="hidden" name="challenge_id" value="{{ .ID }}">
                        <input type="hidden" name="day_id" value="{{ $.DayID }}">
                        <button type="submit">Complete</button>
                      </form>
                    {{ end }}
                  {{ else }}
                    <p>Please log in to complete challenges.</p>
                  {{ end }}
                {{ else }}
                  <p>Challenge available only on the correct day.</p>
                {{ end }}
              </li>
            {{ end }}
          </ul>
        {{ else }}
          <p>No challenges found for this day.</p>
        {{ end }}
    </div>
  </main>

  {{ template "footer" . }}
  {{ template "foot" . }}
{{ end }}
